<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>Shader Maker: uniform.h Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.4 -->
<div class="tabs">
  <ul>
    <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="annotated.html"><span>Classes</span></a></li>
    <li class="current"><a href="files.html"><span>Files</span></a></li>
  </ul>
</div>
<h1>uniform.h</h1><a href="uniform_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">//=============================================================================</span>
<a name="l00016"></a>00016 <span class="comment"></span><span class="preprocessor">#ifndef __UNIFORM_H_INCLUDED__</span>
<a name="l00017"></a>00017 <span class="preprocessor"></span><span class="preprocessor">#define __UNIFORM_H_INCLUDED__</span>
<a name="l00018"></a>00018 <span class="preprocessor"></span>
<a name="l00019"></a>00019 <span class="preprocessor">#include &lt;QtCore/QString&gt;</span>
<a name="l00020"></a>00020 <span class="preprocessor">#include &lt;QtOpenGL/QGLContext&gt;</span>
<a name="l00021"></a>00021 
<a name="l00022"></a>00022 
<a name="l00023"></a>00023 <span class="comment">//=============================================================================</span>
<a name="l00024"></a>00024 <span class="comment">//  CUniform  - contains info about a programs's uniform variable</span>
<a name="l00025"></a>00025 <span class="comment">//=============================================================================</span>
<a name="l00026"></a>00026 
<a name="l00048"></a><a class="code" href="class_c_uniform.html">00048</a> <span class="keyword">class </span><a class="code" href="class_c_uniform.html" title="Stores infos about uniform variables of a GLSL program.">CUniform</a>
<a name="l00049"></a>00049 {
<a name="l00050"></a>00050 <span class="keyword">public</span>:
<a name="l00051"></a>00051     <a class="code" href="class_c_uniform.html#a505624aed0161ad57a1b4c71e65f0f1" title="Constructs a named uniform variable object.">CUniform</a>( <span class="keyword">const</span> QString &amp; name=QString(), <span class="keywordtype">int</span> type=0, <span class="keywordtype">int</span> location=-1 );
<a name="l00052"></a>00052     <a class="code" href="class_c_uniform.html#a505624aed0161ad57a1b4c71e65f0f1" title="Constructs a named uniform variable object.">CUniform</a>( <span class="keyword">const</span> <a class="code" href="class_c_uniform.html" title="Stores infos about uniform variables of a GLSL program.">CUniform</a> &amp; u, <span class="keywordtype">int</span> location );
<a name="l00053"></a>00053     <span class="keyword">virtual</span> <a class="code" href="class_c_uniform.html#76c3bef35c50ce20152ceafaa5b6eb11" title="Destructor.">~CUniform</a>( <span class="keywordtype">void</span> );
<a name="l00054"></a>00054 
<a name="l00059"></a><a class="code" href="class_c_uniform.html#6180afd770fee98ffed8a6df538081cc">00059</a>     <span class="keyword">enum</span> <a class="code" href="class_c_uniform.html#6180afd770fee98ffed8a6df538081cc" title="Uniform base type.">baseType_e</a>
<a name="l00060"></a>00060     {
<a name="l00061"></a>00061         BASE_TYPE_BAD = 0,
<a name="l00062"></a>00062         BASE_TYPE_BOOL,
<a name="l00063"></a>00063         BASE_TYPE_INT,
<a name="l00064"></a>00064         BASE_TYPE_FLOAT,
<a name="l00065"></a>00065         BASE_TYPE_SAMPLER,
<a name="l00066"></a>00066     };
<a name="l00067"></a>00067 
<a name="l00069"></a><a class="code" href="class_c_uniform.html#124cc09f0fe513a36d166d1af88c45a3">00069</a>     <span class="keyword">const</span> QString &amp; <a class="code" href="class_c_uniform.html#124cc09f0fe513a36d166d1af88c45a3" title="Returns the name of the uniform variable.">getName</a>( <span class="keywordtype">void</span> )<span class="keyword"> const </span>{ <span class="keywordflow">return</span> m_name; }
<a name="l00070"></a>00070 
<a name="l00072"></a><a class="code" href="class_c_uniform.html#61707b05fa4145360f0a18cc19d3ba52">00072</a>     <span class="keywordtype">int</span> <a class="code" href="class_c_uniform.html#61707b05fa4145360f0a18cc19d3ba52" title="Returns the OpenGL type of the uniform variable.">getType</a>( <span class="keywordtype">void</span> )<span class="keyword"> const </span>{ <span class="keywordflow">return</span> m_type; }
<a name="l00073"></a>00073 
<a name="l00075"></a><a class="code" href="class_c_uniform.html#d2304c2dc5b442f63be19109d7ee39b2">00075</a>     QString <a class="code" href="class_c_uniform.html#d2304c2dc5b442f63be19109d7ee39b2" title="Returns the name string of the OpenGL type of this uniform.">getTypeName</a>( <span class="keywordtype">void</span> )<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="class_c_uniform.html#06dc2a1cf30dd71fa23aa4f59662d0a7" title="Converts OpenGL&amp;#39;s symbolic type constants from integer to string representation...">getTypeNameString</a>( m_type ); }
<a name="l00076"></a>00076 
<a name="l00078"></a><a class="code" href="class_c_uniform.html#4965254bacc2f6c15b4c124602321699">00078</a>     <span class="keywordtype">int</span> <a class="code" href="class_c_uniform.html#4965254bacc2f6c15b4c124602321699" title="Returns the location of this uniform.">getLocation</a>( <span class="keywordtype">void</span> )<span class="keyword"> const </span>{ <span class="keywordflow">return</span> m_location; }
<a name="l00079"></a>00079 
<a name="l00080"></a>00080     <span class="comment">// meta infos.</span>
<a name="l00081"></a>00081     <span class="keywordtype">int</span> <a class="code" href="class_c_uniform.html#163318a59e427e43dd6901bfef114420" title="Returns the number of vector components in the uniform.">getComponentCount</a>( <span class="keywordtype">void</span> ) <span class="keyword">const</span>;
<a name="l00082"></a>00082     <a class="code" href="class_c_uniform.html#6180afd770fee98ffed8a6df538081cc" title="Uniform base type.">baseType_e</a> <a class="code" href="class_c_uniform.html#6b570f7c465821b7cabf1a87f1c5424c" title="Extracts the scalar types for vectors and matrices out of the OpenGL type of this...">getBaseType</a>( <span class="keywordtype">void</span> ) <span class="keyword">const</span>;
<a name="l00083"></a>00083 
<a name="l00084"></a>00084     <span class="comment">// matrices</span>
<a name="l00085"></a>00085     <span class="keywordtype">bool</span>     <a class="code" href="class_c_uniform.html#40c500022d4dbfef84637b8410e90d22" title="Returns TRUE, if hte uniform is of a matrix type.">isMatrix</a>( <span class="keywordtype">void</span> ) <span class="keyword">const</span>;
<a name="l00086"></a>00086     <span class="keywordtype">int</span>      <a class="code" href="class_c_uniform.html#c91a8008e4e2b9c52822eb6cacf9cd09" title="Returns the number of matrix columns.">getColumnCount</a>( <span class="keywordtype">void</span> ) <span class="keyword">const</span>;
<a name="l00087"></a>00087     <a class="code" href="class_c_uniform.html" title="Stores infos about uniform variables of a GLSL program.">CUniform</a> <a class="code" href="class_c_uniform.html#a60856eae0fa8f6485fe7a54e2bb97e6" title="Get an indexed matrix column.">getColumnVector</a>( <span class="keywordtype">int</span> column ) <span class="keyword">const</span>;
<a name="l00088"></a>00088     <span class="keywordtype">void</span>     <a class="code" href="class_c_uniform.html#2c15174c3463f3a21ed76e4c3aceca66" title="Set an indexed matrix column.">setColumnVector</a>( <span class="keywordtype">int</span> column, <span class="keyword">const</span> <a class="code" href="class_c_uniform.html" title="Stores infos about uniform variables of a GLSL program.">CUniform</a> &amp; u );
<a name="l00089"></a>00089 
<a name="l00090"></a>00090     <span class="comment">// content access</span>
<a name="l00091"></a>00091     <span class="comment">// -&gt; only supports vectors with [1,4] components!</span>
<a name="l00092"></a>00092     <span class="keywordtype">bool</span>   <a class="code" href="class_c_uniform.html#fe123a488eb7889c499244e4c3f73576" title="Returns a boolean value.">getValueAsBool</a> ( <span class="keywordtype">int</span> component ) <span class="keyword">const</span>;
<a name="l00093"></a>00093     <span class="keywordtype">int</span>    <a class="code" href="class_c_uniform.html#60f4bbd62658ca1d27aa756c326df5a5" title="Returns an integer value.">getValueAsInt</a>  ( <span class="keywordtype">int</span> component ) <span class="keyword">const</span>;
<a name="l00094"></a>00094     <span class="keywordtype">double</span> <a class="code" href="class_c_uniform.html#8c731b9d6db171badd0a9a2920875007" title="Returns a floating point value.">getValueAsFloat</a>( <span class="keywordtype">int</span> component ) <span class="keyword">const</span>;
<a name="l00095"></a>00095     <span class="keywordtype">void</span>   <a class="code" href="class_c_uniform.html#a771ac5e26cc372f1a592bf35cd48c63" title="Sets a component to a boolean value.">setValueAsBool</a> ( <span class="keywordtype">int</span> component, <span class="keywordtype">bool</span> value );
<a name="l00096"></a>00096     <span class="keywordtype">void</span>   <a class="code" href="class_c_uniform.html#fe2594f1aa8903f4b9bf1f9616f65611" title="Sets a component to an integer value.">setValueAsInt</a>  ( <span class="keywordtype">int</span> component, <span class="keywordtype">int</span> value );
<a name="l00097"></a>00097     <span class="keywordtype">void</span>   <a class="code" href="class_c_uniform.html#19d8056cec5b5d6ff8d39c2338d71518" title="Sets a component to a floating point value.">setValueAsFloat</a>( <span class="keywordtype">int</span> component, <span class="keywordtype">double</span> value );
<a name="l00098"></a>00098 
<a name="l00099"></a>00099     <span class="comment">// passes its data directly to the GL</span>
<a name="l00100"></a>00100     <span class="keywordtype">void</span> <a class="code" href="class_c_uniform.html#731ad5e4b464d2bb17ac1b572a61b775" title="Passes the currently stored uniform data to OpenGL.">applyToGL</a>( <span class="keywordtype">void</span> );
<a name="l00101"></a>00101 
<a name="l00102"></a>00102     <span class="comment">// helpers</span>
<a name="l00103"></a>00103     <span class="keyword">static</span> QString <a class="code" href="class_c_uniform.html#06dc2a1cf30dd71fa23aa4f59662d0a7" title="Converts OpenGL&amp;#39;s symbolic type constants from integer to string representation...">getTypeNameString</a>( <span class="keywordtype">int</span> type );
<a name="l00104"></a>00104 
<a name="l00105"></a>00105 <span class="keyword">private</span>:
<a name="l00106"></a>00106 
<a name="l00111"></a>00111     <span class="keyword">typedef</span> <span class="keyword">union </span>dataUnit_u {
<a name="l00112"></a>00112         GLfloat _float  [ 16 ]; 
<a name="l00113"></a>00113         GLint   _int    [ 4 ];  
<a name="l00114"></a>00114     } dataUnit_t;
<a name="l00115"></a>00115 
<a name="l00116"></a>00116     QString     m_name;
<a name="l00117"></a>00117     <span class="keywordtype">int</span>         m_type; <span class="comment">// GL_??? type identifier</span>
<a name="l00118"></a>00118     <span class="keywordtype">int</span>         m_location;
<a name="l00119"></a>00119     dataUnit_t  m_data;
<a name="l00120"></a>00120 };
<a name="l00121"></a>00121 
<a name="l00122"></a>00122 
<a name="l00123"></a>00123 <span class="comment">//=============================================================================</span>
<a name="l00124"></a>00124 <span class="comment">//  IUniformState - manages uniforms</span>
<a name="l00125"></a>00125 <span class="comment">//=============================================================================</span>
<a name="l00126"></a>00126 
<a name="l00131"></a><a class="code" href="class_i_uniform_state.html">00131</a> <span class="keyword">class </span><a class="code" href="class_i_uniform_state.html" title="Stores a list of uniforms.">IUniformState</a>
<a name="l00132"></a>00132 {
<a name="l00133"></a>00133 <span class="keyword">public</span>:
<a name="l00134"></a>00134     <span class="keyword">virtual</span> ~<a class="code" href="class_i_uniform_state.html" title="Stores a list of uniforms.">IUniformState</a>( <span class="keywordtype">void</span> ) {}
<a name="l00135"></a>00135 
<a name="l00140"></a>00140     <span class="keyword">virtual</span> <span class="keywordtype">int</span> <a class="code" href="class_i_uniform_state.html#dfd934578862d7fd99b107cac27d816b" title="Returns the number of uniforms stored in this object.">getActiveUniforms</a>( <span class="keywordtype">void</span> ) = 0;
<a name="l00141"></a>00141 
<a name="l00149"></a>00149     <span class="keyword">virtual</span> <a class="code" href="class_c_uniform.html" title="Stores infos about uniform variables of a GLSL program.">CUniform</a> <a class="code" href="class_i_uniform_state.html#574bd9132039c0539a342b1b21c8ec22" title="Returns an indexed uniform.">getUniform</a>( <span class="keywordtype">int</span> index ) = 0;
<a name="l00150"></a>00150 
<a name="l00160"></a>00160     <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="class_i_uniform_state.html#3dae402ef7294adf977249e4a6da9277" title="Sets the uniform at a given index.">setUniform</a>( <span class="keywordtype">int</span> index, <span class="keyword">const</span> <a class="code" href="class_c_uniform.html" title="Stores infos about uniform variables of a GLSL program.">CUniform</a> &amp; u ) = 0;
<a name="l00161"></a>00161 };
<a name="l00162"></a>00162 
<a name="l00163"></a>00163 
<a name="l00164"></a>00164 
<a name="l00165"></a>00165 <span class="preprocessor">#endif  // __UNIFORM_H_INCLUDED__</span>
</pre></div><hr size="1"><address style="text-align: right;"><small>Generated on Sun Mar 2 17:12:31 2008 for Shader Maker by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.4 </small></address>
</body>
</html>
